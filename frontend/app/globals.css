@tailwind base;
@tailwind components;
@tailwind utilities;

/**
 * PALETTE ALGERENT - Marine Clair (Light) / Violet Profond (Dark)
 * Variables CSS en format RGB pour support alpha Tailwind (/xx)
 */
:root {
  /* Palette ALGERENT - Laranja / Ceu / Deep / Neve / Midnight */
  --c-laranja: 236 57 16;   /* #EC3910 */
  --c-ceu: 179 229 254;     /* #B3E5FE */
  --c-deep: 36 61 102;      /* #243D66 */
  --c-neve: 240 241 246;    /* #F0F1F6 */
  --c-midnight: 22 31 40;   /* #161F28 */
  --c-azure-800: 5 38 152;  /* #052698 */
  --c-azure-600: 17 107 251; /* #116BFB */
  --c-azure-500: 33 188 238; /* #21BCEE */
  --c-azure-300: 220 227 235; /* #DCE3EB */

  /* Surfaces & text (Light Mode) */
  --bg: 240 241 246;        /* Neve */
  --bg-warm: 246 247 251;   /* Neve lighter */
  --surface: 255 255 255;   /* White */
  --surface2: 235 240 248;  /* Ceu tint very light */
  --border: 215 220 230;    /* Neutral cool */
  --text: 22 31 40;         /* Midnight */
  --text-muted: 84 96 118;  /* Cool Gray */
  --muted: 84 96 118;       /* Alias for compatibility */

  /* Brand roles */
  --primary: 36 61 102;     /* Deep Blue */
  --primary-hover: 30 51 86;
  --primary-active: 24 42 70;
  
  --cta: 236 57 16;         /* Laranja */
  --cta-hover: 215 51 17;
  --cta-active: 194 46 16;
  
  --focus: 17 107 251;       /* Azure focus ring */

  /* Legacy brand mapping (Compatiblity) */
  --brand: 36 61 102;
  --brand-hover: 30 51 86;
  --brand2: 17 107 251;
  --pop: 179 229 254;       /* Ceu */
  --brandSoft: 240 241 246; /* Neve */
  --brand-blue-soft: 220 227 235;

  /* Status colors - Refined */
  --warning: 245 158 11;
  --danger: 220 38 38;      /* Red 600 */
  --info: 33 188 238;       /* Azure 500 */
  --success: 22 163 74;     /* Green 600 */

  /* UI states */
  --ring: 17 107 251;
  --onBrand: 255 255 255;

  /* Utility tokens - Spacing Base 8px logic implicitly used in Tailwind */
  --shadow-sm: 0 1px 3px rgb(22 31 40 / 0.08);
  --shadow-md: 0 4px 12px rgb(22 31 40 / 0.08);
  --r-sm: 8px;
  --r-md: 12px;
  --t-fast: 150ms;
  --t-med: 250ms;
  --ease: cubic-bezier(0.2, 0.0, 0.2, 1);

  /* Lovable / component tokens (HSL - Keep existing for compatibility but align hues) */
  --lovable-background: 210 20% 98%; /* Neve HSL approx */
  --lovable-foreground: 213 27% 12%; /* Midnight HSL approx */
  /* ... keeping other lovable tokens as is for now to avoid breaking too much, but mapped conceptually ... */
  --lovable-primary: 217 48% 27%;    /* Deep Blue HSL */
  --lovable-accent: 194 84% 53%;     /* Azure 500 HSL */
  /* ... */
}

.dark, [data-theme="dark"] {
  /* Dark Mode - Sobriety first (Midnight Base) */
  --bg: 22 31 40;           /* Midnight */
  --bg-warm: 18 25 32;      /* Darker Midnight */
  --surface: 30 41 55;      /* Lighter Midnight */
  --surface2: 38 52 70;     /* Highlight */
  --border: 50 65 85;       /* Muted Blue/Grey - Visible but not harsh */
  
  --text: 240 241 246;      /* Neve (White-ish) */
  --text-muted: 156 166 184; /* Muted Blue/Grey */
  --muted: 156 166 184;

  /* Brand roles - Adjusted for Dark Mode Contrast */
  --primary: 60 90 140;     /* Lightened Deep Blue for visibility */
  --primary-hover: 75 110 165;
  --primary-active: 50 80 120;
  
  --cta: 236 57 16;         /* Keep Laranja as accent (it pops well on dark) */
  --cta-hover: 240 80 40;
  --cta-active: 220 50 10;
  
  --focus: 26 88 196;

  /* Legacy brand mapping */
  --brand: 60 90 140;
  --brand-hover: 75 110 165;
  --brand2: 11 63 156;
  --pop: 30 45 60;          /* Muted Pop */
  --brandSoft: 30 41 55;    /* Surface match */
  --brand-blue-soft: 14 35 70;

  /* Status colors */
  --warning: 180 83 9;      /* Darker Amber */
  --danger: 153 27 27;      /* Darker Red */
  --info: 42 127 219;       /* Azure dark */
  --success: 22 101 52;     /* Darker Green */

  --ring: 26 88 196;
  --onBrand: 22 31 40;

  --shadow-sm: 0 1px 2px rgb(0 0 0 / 0.4);
  --shadow-md: 0 8px 16px rgb(0 0 0 / 0.4);
  --c-azure-800: 7 32 88;   /* Deep azure for dark */
  --c-azure-600: 26 88 196; /* #1A58C4 */
  --c-azure-500: 42 127 219; /* #2A7FDB */
  --c-azure-300: 26 50 86;  /* soft azure tint */
  --lovable-accent: 214 70% 45%;
}


@layer base {
  :root {
    color-scheme: light;
  }

  .dark {
    color-scheme: dark;
  }

  body {
    background-color: rgb(var(--bg));
    color: rgb(var(--text));
    font-family: var(--font-ui), sans-serif;
    @apply antialiased;
  }

  h1 {
    @apply text-4xl sm:text-5xl lg:text-6xl font-semibold tracking-tight text-text;
    line-height: 1.05;
    font-family: var(--font-display), sans-serif;
  }

  h2 {
    @apply text-3xl sm:text-4xl font-semibold tracking-tight text-text;
    line-height: 1.2;
    font-family: var(--font-display), sans-serif;
  }

  h3 {
    @apply text-xl font-semibold text-text;
  }

  p {
    @apply text-text leading-relaxed;
  }

  a {
    @apply text-brand2 hover:text-brand transition-colors;
  }
}

@layer components {

  /* Layout */
  .container-emd {
    @apply mx-auto w-full max-w-7xl px-4 sm:px-6 lg:px-8;
  }

  /* Surfaces */
  .card {
    @apply bg-surface border border-border rounded-2xl;
    box-shadow: var(--shadow-sm);
  }

  .card-soft {
    @apply bg-surface2 border border-border rounded-2xl;
  }

  /* Links */
  .link {
    @apply text-brand2 hover:text-brand underline-offset-4 hover:underline transition-colors;
  }

  /* Badges */
  .badge {
    @apply inline-flex items-center gap-2 rounded-full px-3 py-1 text-sm border;
  }

  .badge-brand {
    @apply badge bg-brand/10 text-brand border-brand/25;
  }

  .badge-warning {
    @apply badge bg-warning/15 text-warning border-warning/30;
  }

  .badge-muted {
    @apply badge bg-border/30 text-muted border-border;
  }

  .badge-danger {
    @apply badge bg-danger/10 text-danger border-danger/25;
  }

  /* Buttons */
  .btn {
    @apply inline-flex items-center justify-center gap-2 rounded-xl px-4 py-2 text-sm font-medium transition active:scale-[0.99] focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-bg disabled:opacity-60 disabled:pointer-events-none;
  }

  .btn-primary {
    @apply btn text-onBrand;
    background: rgb(var(--primary));
  }

  .btn-primary:hover {
    background: rgb(var(--primary-hover));
  }

  .btn-cta {
    @apply btn text-onBrand;
    background: rgb(var(--cta));
  }

  .btn-cta:hover {
    background: rgb(var(--cta-hover));
  }

  .btn-secondary {
    @apply btn bg-surface border border-border text-text hover:bg-surface2;
  }

  .btn-ghost {
    @apply btn bg-transparent text-text hover:bg-brand/10;
  }

  /* Inputs */
  .input {
    @apply w-full rounded-xl bg-surface border border-border px-3 py-2 text-sm text-text placeholder:text-muted/80 focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-bg;
  }

  .input-error {
    @apply border-danger focus-visible:ring-danger;
  }

  .help-text {
    @apply text-xs text-muted;
  }

  .error-text {
    @apply text-xs text-danger;
  }

  /* Navbar */
  .nav {
    @apply bg-surface/80 backdrop-blur border-b border-border;
  }

  /* Hero (panel lisible sur gradient animé) */
  .hero-panel {
    @apply hero-scrim rounded-3xl p-6 sm:p-10 shadow-sm;
  }

  .icon-glass {
    @apply relative rounded-xl flex items-center justify-center overflow-hidden transition-all duration-500;
    background: hsl(var(--lovable-foreground) / 0.05);
    border: 1px solid hsl(var(--lovable-border) / 0.6);
  }
}

@layer utilities {

  /* Hero Signature Gradient - Basé sur brand colors */
  .hero-gradient-bg {
    background: linear-gradient(-45deg,
        rgb(var(--bg)),
        rgb(var(--brand) / 0.15),
        rgb(var(--brand2) / 0.1),
        rgb(var(--brandSoft)));
    background-size: 400% 400%;
    animation: gradient-flow 15s ease infinite;
  }

  @keyframes gradient-flow {
    0% {
      background-position: 0% 50%;
    }

    50% {
      background-position: 100% 50%;
    }

    100% {
      background-position: 0% 50%;
    }
  }

  @keyframes marquee {
    0% {
      transform: translateX(0);
    }

    100% {
      transform: translateX(-50%);
    }
  }

  .animate-marquee {
    animation: marquee 28s linear infinite;
  }

  @media (prefers-reduced-motion: reduce) {
    .hero-gradient-bg {
      animation: none;
      background-size: 100% 100%;
    }

    .animate-marquee {
      animation: none;
      transform: translateX(0);
    }
  }

  /* Hero Scrim - Panel lisible avec backdrop */
  .hero-scrim {
    background: rgb(var(--surface) / 0.82);
    backdrop-filter: blur(6px);
    -webkit-backdrop-filter: blur(6px);
  }

  .dark .hero-scrim {
    background: rgb(var(--surface) / 0.9);
  }

  /* Gradient utilities - ALGERENT signature */
  .bg-brand-gradient {
    background-image: linear-gradient(135deg, rgb(var(--brand)), rgb(var(--brand2)), rgb(var(--pop)));
  }

  .btn-gradient {
    background-image: linear-gradient(135deg, rgb(var(--primary)), rgb(var(--cta)));
    color: rgb(var(--onBrand));
    transition: opacity 0.2s, transform 0.1s;
  }

  .btn-gradient:hover {
    opacity: 0.9;
  }

  .btn-gradient:active {
    transform: scale(0.99);
  }

  .text-brand-gradient {
    background-clip: text;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-image: linear-gradient(135deg, rgb(var(--primary)), rgb(var(--cta)));
  }

  .reveal {
    opacity: 0;
    transform: translateY(24px);
    transition: opacity 0.7s ease-out, transform 0.7s ease-out;
  }

  .reveal.visible {
    opacity: 1;
    transform: translateY(0);
  }

  .hover-lift {
    @apply transition-all duration-300;
  }

  .hover-lift:hover {
    transform: translateY(-4px);
    box-shadow: var(--lovable-shadow-lg);
  }

  .lovable-text-gradient {
    background: linear-gradient(135deg, hsl(var(--lovable-primary)), hsl(var(--lovable-terracotta)));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }
}
