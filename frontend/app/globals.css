@tailwind base;
@tailwind components;
@tailwind utilities;

/**
 * PALETTE ALGERENT - Glass + Gradient Pro
 * Variables CSS en format RGB pour support alpha Tailwind (/xx)
 */
:root {
  /* Palette ALGERENT - Azure + Graphite + Emerald + Navy */
  --c-graphite: 11 18 32;    /* #0B1220 */
  --c-navy: 14 42 71;        /* #0E2A47 */
  --c-emerald-600: 31 138 91; /* #1F8A5B */
  --c-emerald-500: 58 196 136; /* #3AC488 */
  --c-azure-800: 14 58 140;  /* #0E3A8C */
  --c-azure-600: 27 108 255; /* #1B6CFF */
  --c-azure-500: 60 140 255; /* #3C8CFF */
  --c-azure-400: 75 203 255; /* #4BCBFF */
  --c-azure-300: 221 234 255; /* #DDEAFF */
  --c-azure-100: 238 244 255; /* #EEF4FF */
  --c-ice: 246 248 252;      /* #F6F8FC */

  /* Surfaces & text (Light Mode) */
  --bg: 246 248 252;        /* Ice */
  --bg-warm: 244 247 252;   /* Slight warm tint */
  --surface: 255 255 255;   /* White */
  --surface2: 238 244 255;  /* Azure tint */
  --border: 230 235 244;    /* Subtle border */
  --text: 11 18 32;         /* Graphite */
  --text-muted: 91 102 122; /* Muted graphite */
  --muted: 91 102 122;      /* Alias for compatibility */

  /* Brand roles */
  --primary: 31 138 91;     /* Emerald */
  --primary-hover: 27 122 82;
  --primary-active: 23 103 70;
  
  --cta: 31 138 91;         /* Emerald base */
  --cta-hover: 28 124 83;
  --cta-active: 23 103 70;
  --cta-end: 27 108 255;    /* Azure end */
  --cta-end-hover: 24 98 232;
  --cta-end-active: 20 85 205;
  
  --focus: 27 108 255;       /* Azure focus ring */

  /* Legacy brand mapping (Compatiblity) */
  --brand: 14 42 71;        /* Navy */
  --brand-hover: 12 36 61;
  --brand2: 27 108 255;     /* Azure */
  --pop: 238 244 255;       /* Azure soft */
  --brandSoft: 246 248 252; /* Ice */
  --brand-blue-soft: 224 232 245;

  /* Status colors - Refined */
  --warning: 216 154 0;
  --danger: 209 69 69;
  --info: 27 108 255;       /* Azure */
  --success: 31 138 91;     /* Emerald */

  /* UI states */
  --ring: 27 108 255;
  --onBrand: 255 255 255;

  /* Utility tokens - Spacing Base 8px logic implicitly used in Tailwind */
  --shadow-sm: 0 6px 16px rgb(12 24 45 / 0.08);
  --shadow-md: 0 16px 40px rgb(12 24 45 / 0.12);
  --r-sm: 8px;
  --r-md: 12px;
  --t-fast: 150ms;
  --t-med: 250ms;
  --ease: cubic-bezier(0.2, 0.0, 0.2, 1);

  /* Lovable / component tokens (HSL - Keep existing for compatibility but align hues) */
  --lovable-background: 220 33% 98%; /* Ice HSL */
  --lovable-foreground: 220 30% 12%; /* Graphite HSL */
  /* ... keeping other lovable tokens as is for now to avoid breaking too much, but mapped conceptually ... */
  --lovable-primary: 214 66% 20%;    /* Navy HSL */
  --lovable-accent: 220 100% 55%;    /* Azure HSL */
  /* ... */
}

.dark, [data-theme="dark"] {
  /* Dark Mode - Sobriety first (Midnight Base) */
  --bg: 11 17 26;           /* Deep graphite */
  --bg-warm: 14 20 30;      /* Deep warm */
  --surface: 18 26 38;      /* Dark surface */
  --surface2: 22 32 48;     /* Elevated surface */
  --border: 34 49 69;       /* Subtle border */
  
  --text: 231 236 245;      /* Light text */
  --text-muted: 154 166 186; /* Muted text */
  --muted: 154 166 186;

  /* Brand roles - Adjusted for Dark Mode Contrast */
  --primary: 58 196 136;     /* Emerald */
  --primary-hover: 50 175 121;
  --primary-active: 40 150 104;
  
  --cta: 58 196 136;
  --cta-hover: 54 182 128;
  --cta-active: 43 150 106;
  --cta-end: 60 140 255;    /* Azure */
  --cta-end-hover: 52 124 228;
  --cta-end-active: 45 108 206;
  
  --focus: 60 140 255;

  /* Legacy brand mapping */
  --brand: 26 58 92;        /* Navy */
  --brand-hover: 22 50 80;
  --brand2: 60 140 255;     /* Azure */
  --pop: 19 30 44;          /* Muted Pop */
  --brandSoft: 18 26 38;    /* Surface match */
  --brand-blue-soft: 20 38 60;

  /* Status colors */
  --warning: 224 178 0;
  --danger: 224 101 101;
  --info: 60 140 255;
  --success: 58 196 136;

  --ring: 60 140 255;
  --onBrand: 11 17 26;

  --shadow-sm: 0 8px 18px rgb(0 0 0 / 0.35);
  --shadow-md: 0 18px 44px rgb(0 0 0 / 0.45);
  --c-graphite: 11 17 26;
  --c-navy: 26 58 92;
  --c-emerald-600: 58 196 136;
  --c-emerald-500: 70 214 154;
  --c-azure-800: 20 50 100;
  --c-azure-600: 60 140 255;
  --c-azure-500: 78 156 255;
  --c-azure-400: 103 212 255;
  --c-azure-300: 26 42 66;
  --c-azure-100: 22 32 48;
  --c-ice: 11 17 26;
  --lovable-background: 220 25% 10%;
  --lovable-foreground: 220 25% 92%;
  --lovable-primary: 214 50% 40%;
  --lovable-accent: 216 80% 60%;
}


@layer base {
  :root {
    color-scheme: light;
  }

  .dark {
    color-scheme: dark;
  }

  body {
    background-color: rgb(var(--bg));
    color: rgb(var(--text));
    font-family: var(--font-ui), sans-serif;
    @apply antialiased;
  }

  h1 {
    @apply text-4xl sm:text-5xl lg:text-6xl font-semibold tracking-tight text-text;
    line-height: 1.05;
    font-family: var(--font-display), sans-serif;
  }

  h2 {
    @apply text-3xl sm:text-4xl font-semibold tracking-tight text-text;
    line-height: 1.2;
    font-family: var(--font-display), sans-serif;
  }

  h3 {
    @apply text-xl font-semibold text-text;
  }

  p {
    @apply text-text leading-relaxed;
  }

  a {
    @apply text-brand2 hover:text-brand transition-colors;
  }
}

@layer components {

  /* Layout */
  .container-emd {
    @apply mx-auto w-full max-w-7xl px-4 sm:px-6 lg:px-8;
  }

  /* Surfaces */
  .card {
    @apply bg-surface border border-border rounded-2xl;
    box-shadow: var(--shadow-sm);
  }

  .card-soft {
    @apply bg-surface2 border border-border rounded-2xl;
  }

  /* Links */
  .link {
    @apply text-brand2 hover:text-brand underline-offset-4 hover:underline transition-colors;
  }

  /* Badges */
  .badge {
    @apply inline-flex items-center gap-2 rounded-full px-3 py-1 text-sm border;
  }

  .badge-brand {
    @apply badge bg-brand/10 text-brand border-brand/25;
  }

  .badge-warning {
    @apply badge bg-warning/15 text-warning border-warning/30;
  }

  .badge-muted {
    @apply badge bg-border/30 text-muted border-border;
  }

  .badge-danger {
    @apply badge bg-danger/10 text-danger border-danger/25;
  }

  /* Buttons */
  .btn {
    @apply inline-flex items-center justify-center gap-2 rounded-xl px-4 py-2 text-sm font-medium transition active:scale-[0.99] focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-bg disabled:opacity-60 disabled:pointer-events-none;
  }

  .btn-primary {
    @apply btn text-onBrand;
    background: rgb(var(--primary));
    box-shadow: var(--shadow-sm);
  }

  .btn-primary:hover {
    background: rgb(var(--primary-hover));
    box-shadow: var(--shadow-md);
  }

  .btn-cta {
    @apply btn text-onBrand;
    background: linear-gradient(135deg, rgb(var(--cta)), rgb(var(--cta-end)));
    box-shadow: var(--shadow-sm);
  }

  .btn-cta:hover {
    background: linear-gradient(135deg, rgb(var(--cta-hover)), rgb(var(--cta-end-hover)));
    box-shadow: var(--shadow-md);
  }

  .btn-cta:active {
    background: linear-gradient(135deg, rgb(var(--cta-active)), rgb(var(--cta-end-active)));
  }

  .btn-secondary {
    @apply btn bg-surface border border-border text-text hover:bg-surface2;
  }

  .btn-ghost {
    @apply btn bg-transparent text-text hover:bg-brand/10;
  }

  /* Inputs */
  .input {
    @apply w-full rounded-xl bg-surface border border-border px-3 py-2 text-sm text-text placeholder:text-muted/80 focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-bg;
  }

  .input-error {
    @apply border-danger focus-visible:ring-danger;
  }

  .help-text {
    @apply text-xs text-muted;
  }

  .error-text {
    @apply text-xs text-danger;
  }

  /* Navbar */
  .nav {
    @apply bg-surface/70 backdrop-blur-md border-b border-border;
  }

  /* Hero (panel lisible sur gradient animé) */
  .hero-panel {
    @apply hero-scrim rounded-3xl p-6 sm:p-10 shadow-sm;
  }

  .icon-glass {
    @apply relative rounded-xl flex items-center justify-center overflow-hidden transition-all duration-500;
    background: hsl(var(--lovable-foreground) / 0.05);
    border: 1px solid hsl(var(--lovable-border) / 0.6);
  }
}

@layer utilities {

  /* Hero Signature Gradient - Basé sur brand colors */
  .hero-gradient-bg {
    background: linear-gradient(-45deg,
        rgb(var(--bg)),
        rgb(var(--brand) / 0.15),
        rgb(var(--brand2) / 0.1),
        rgb(var(--brandSoft)));
    background-size: 400% 400%;
    animation: gradient-flow 15s ease infinite;
  }

  @keyframes gradient-flow {
    0% {
      background-position: 0% 50%;
    }

    50% {
      background-position: 100% 50%;
    }

    100% {
      background-position: 0% 50%;
    }
  }

  @keyframes marquee {
    0% {
      transform: translateX(0);
    }

    100% {
      transform: translateX(-50%);
    }
  }

  .animate-marquee {
    animation: marquee 28s linear infinite;
  }

  @media (prefers-reduced-motion: reduce) {
    .hero-gradient-bg {
      animation: none;
      background-size: 100% 100%;
    }

    .animate-marquee {
      animation: none;
      transform: translateX(0);
    }
  }

  /* Hero Scrim - Panel lisible avec backdrop */
  .hero-scrim {
    background: rgb(var(--surface) / 0.7);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border: 1px solid rgb(var(--border) / 0.6);
  }

  .dark .hero-scrim {
    background: rgb(var(--surface) / 0.9);
  }

  /* Gradient utilities - ALGERENT signature */
  .bg-brand-gradient {
    background-image: linear-gradient(135deg, rgb(var(--brand)), rgb(var(--brand2)), rgb(var(--pop)));
  }

  .btn-gradient {
    background-image: linear-gradient(135deg, rgb(var(--primary)), rgb(var(--cta)));
    color: rgb(var(--onBrand));
    transition: opacity 0.2s, transform 0.1s;
  }

  .btn-gradient:hover {
    opacity: 0.9;
  }

  .btn-gradient:active {
    transform: scale(0.99);
  }

  .text-brand-gradient {
    background-clip: text;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-image: linear-gradient(135deg, rgb(var(--primary)), rgb(var(--cta)));
  }

  .reveal {
    opacity: 0;
    transform: translateY(24px);
    transition: opacity 0.7s ease-out, transform 0.7s ease-out;
  }

  .reveal.visible {
    opacity: 1;
    transform: translateY(0);
  }

  .hover-lift {
    @apply transition-all duration-300;
  }

  .hover-lift:hover {
    transform: translateY(-4px);
    box-shadow: var(--lovable-shadow-lg);
  }

  .lovable-text-gradient {
    background: linear-gradient(135deg, hsl(var(--lovable-primary)), hsl(var(--lovable-terracotta)));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }
}
